"use strict";function update(){var t=tree.nodes(root).reverse(),e=tree.links(t);t.forEach(function(t){maxDepth<t.depth&&(maxDepth=t.depth),t.y=100*t.depth});var a=svg.selectAll("g.node").data(t,function(t){return t.id||(t.id=++i)}),n=a.enter().append("g").attr("data-id",function(t){return t.id}).attr("data-parent-id",function(t){return t.parent.id}).attr("class",function(t){return 0==t.depth?"node":"node hidden"}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"});n.append("circle").attr("r",10).style("fill","#ccc"),n.append("text").attr("y",function(t){return t.children||t._children?-18:18}).attr("dy",".35em").attr("text-anchor","middle").text(function(t){return t.name}).style("fill-opacity",1);var r=svg.selectAll("path.link").data(e,function(t){return t.target.id});r.enter().insert("path","g").attr("data-link-id",function(t){return t.target.parent.id}).attr("class","link hidden").attr("d",diagonal),a.on("click",function(){var t=$(this),e=t.data("id");t.hasClass("expanded")?hideChildren(e):($(".node[data-parent-id="+e+"]").toggleClass("hidden"),$("path[data-link-id="+e+"]").toggleClass("hidden")),t.toggleClass("expanded")})}function hideChildren(t){for(var e=0;e<maxDepth;e++)$(".node[data-parent-id="+(t-e)+"]").addClass("hidden").removeClass("expanded"),$("path[data-link-id="+(t-e)+"]").addClass("hidden")}var treeData=[{name:"Top Level",parent:"null",children:[{name:"Level 2: A",parent:"Top Level",children:[{name:"Son of A",parent:"Level 2: A",children:[{name:"Son of son of A",parent:"Level 3: A"},{name:"Daughter of son of A",parent:"Level 3: A"}]},{name:"Daughter of A",parent:"Level 2: A"}]},{name:"Level 2: B",parent:"Top Level"}]}],margin={top:40,right:120,bottom:20,left:120},width=960-margin.right-margin.left,height=500-margin.top-margin.bottom,i=0,tree=d3.layout.tree().size([height,width]),diagonal=d3.svg.diagonal().projection(function(t){return[t.x,t.y]}),svg=d3.select("body").append("svg").attr("width",width+margin.right+margin.left).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),root=treeData[0],maxDepth=0;update();